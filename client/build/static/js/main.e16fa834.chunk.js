(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{155:function(e,t,n){},156:function(e,t,n){},180:function(e,t){},182:function(e,t){},192:function(e,t){},194:function(e,t){},221:function(e,t){},223:function(e,t){},224:function(e,t){},229:function(e,t){},231:function(e,t){},237:function(e,t){},239:function(e,t){},258:function(e,t){},270:function(e,t){},273:function(e,t){},302:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),c=n(149),o=n.n(c),s=(n(155),n(7)),i=(n(156),n(6)),d=n(150),u=n.n(d),l=n(0);var j=function(e){var t=Object(r.useState)(""),n=Object(s.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(""),d=Object(s.a)(o,2),u=d[0],j=d[1];function b(t){t.preventDefault(),""!==a&&""!==u&&(e.dispatch({type:i.a.ERROR,payload:{errors:[]}}),Object(i.d)(a,u).then((function(t){e.dispatch({type:i.a.LOGIN,payload:{uuid:t.data.uuid,username:t.data.username,errors:t.data.errors}})})))}function h(e){"Enter"===e.key&&b(e)}return Object(l.jsxs)("div",{id:"login-box",children:[Object(l.jsx)("label",{children:"Username: "}),Object(l.jsx)("input",{id:"username",className:"login-input",onChange:function(e){return c(e.target.value)},value:a,placeholder:"username",onKeyDown:h}),Object(l.jsx)("label",{children:"Password: "}),Object(l.jsx)("input",{id:"password",className:"login-input",onChange:function(e){return j(e.target.value)},value:u,placeholder:"password",type:"password",onKeyDown:h}),Object(l.jsx)("button",{onClick:b,children:"Register/Login"})]})};function b(e){var t="noselect";return 0===e.state.errors.length&&(t+=" hidden"),Object(l.jsxs)("div",{id:"error-window",className:t,onClick:function(){e.dispatch({type:i.a.ERROR,payload:{errors:[]}})},children:[Object(l.jsx)("div",{id:"error-header",children:Object(l.jsx)("div",{children:Object(l.jsx)("h1",{children:"Errors"})})}),Object(l.jsx)("div",{id:"error-body",children:e.state.errors.map((function(e,t){return Object(l.jsx)("div",{className:"errors",children:e},"err".concat(t))}))})]})}var h=["D","C","H","S"],f=["3","4","5","6","7","8","9","10","J","Q","K","A","2"],O=Object(l.jsx)("img",{className:"card noselect",src:"cards/RED_BACK.svg",alt:"Red Card Back"});function m(e){var t=Object(r.useState)(),n=Object(s.a)(t,2)[1],a=Object(r.useCallback)((function(){return n({})}),[]),c=e.socket,o=Object(r.useState)(0),d=Object(s.a)(o,2),u=d[0],j=d[1],b=Object(r.useState)(""),m=Object(s.a)(b,2),p=m[0],v=m[1],x=Object(r.useState)(["You","Right Opponent","","Left Opponent"]),y=Object(s.a)(x,2),g=y[0],R=y[1],N=Object(r.useState)(0),_=Object(s.a)(N,2),C=_[0],k=_[1],w=Object(r.useState)(null),S=Object(s.a)(w,2),E=S[0],L=S[1],I=Object(r.useState)(0),A=Object(s.a)(I,2),G=A[0],D=A[1],P=Object(r.useState)({}),B=Object(s.a)(P,2),J=B[0],M=B[1],T=Object(r.useState)([[0,1,2,3],1,1,1]),F=Object(s.a)(T,2),K=F[0],H=F[1];function U(){e.dispatch({type:i.a.ERROR,payload:{errors:[]}})}function z(){U(),p.length>1?(Object(i.b)(p).then((function(e){Y(e.data.room),Q()})),v("")):e.dispatch({type:i.a.ERROR,payload:{errors:["Room name must be greater than 1 character"]}})}function Q(){U(),Object(i.c)().then((function(t){e.dispatch({type:i.a.GET_ROOMS,payload:{rooms:t.data.rooms}})}))}function Y(e){U(),c.emit("join_room",e)}function q(){var e={};K[0].forEach((function(t){return e[t]=!1})),M(e)}function V(e){var t=f[Math.floor(e/4)],n=h[e%4],r="card";return J[e]&&(r+=" active"),Object(l.jsx)("img",{className:r,src:"cards/".concat(t).concat(n,".svg"),onClick:function(){return function(e){var t=J;t[e]=!t[e],M(t),a()}(e)},alt:"".concat(t).concat(n)},"cardId".concat(e))}Object(r.useEffect)((function(){Q(),c.emit("login",e.state.username),c.on("force_logout",(function(){e.dispatch({type:i.a.LOGIN,payload:{uuid:null,username:null,errors:["Expired Session"]}})})),c.on("join_room",(function(t){var n=t.room_name,r=t.players;if(e.dispatch({type:i.a.JOIN,payload:{room_name:n}}),r){for(var a=[],c=0;r[c]!==e.state.username;)c+=1;for(var o=0;o<4;o++)a.push(r[c+o%4]);R(a)}})),c.on("setup",(function(e){var t=e.playerNames,n=e.hands,r=e.first_player;console.log(t,n,r),R(t),H(n),L([]);for(var a=C,c=0;c<4;c++)if(r===t[c]){for(;a%4!=c;)a+=1;k(a),D(a);break}})),c.on("card_play",(function(e){var t=e.card_arr,n=e.card_player,r=e.next_player,a=e.hands_names,c=Object(s.a)(a,2),o=c[0],i=c[1];console.log(o),L(t),H(o);for(var d=0;d<4;d++){if(r===i[d]){for(var u=C;u%4!=d;)u+=1;k(u)}if(n===i[d]){for(var l=G;l%4!==d;)l+=1;D(l)}}})),c.on("player_names",(function(e){R(e)})),c.on("player_hands",(function(e){H(e)})),c.on("player_turn",(function(e){k((function(e){return e+1}))})),c.on("game_over",(function(){e.dispatch({type:i.a.ERROR,errors:["Game Over"]})})),c.on("error",(function(t){e.dispatch({type:i.a.ERROR,payload:{errors:t}})}))}),[]);var W=Object(l.jsx)("div",{children:"Loading Lobby..."}),X=[Object(l.jsxs)("div",{onClick:function(){return c.emit("debugging")},children:["Username: ",e.state.username]})],Z=Object(l.jsx)("div",{});if(""===e.state.current_room||void 0===e.state.current_room){var $=Math.ceil(e.state.rooms.length/8);W=Object(l.jsxs)("div",{id:"lobby",children:[Object(l.jsxs)("div",{id:"lobby-header",children:[Object(l.jsx)("div",{children:Object(l.jsx)("label",{children:"Lobbies"})}),Object(l.jsxs)("div",{id:"text_and_refresh",children:[Object(l.jsx)("input",{id:"new-room-name",onChange:function(e){return v(e.target.value)},value:p,placeholder:"New Room Name",onKeyDown:function(e){"Enter"===e.key&&z()}}),Object(l.jsx)("img",{id:"refresh",src:"refresh.png",alt:"refresh button",onClick:Q})]}),Object(l.jsx)("div",{id:"new-room-button",onClick:function(){return z()},children:"Create New Room"})]}),Object(l.jsxs)("div",{id:"lobby-body",children:[e.state.rooms.slice(8*u,8*(u+1)).map((function(e){return Object(l.jsxs)("div",{className:"room",onClick:function(){return Y(e)},children:[" ",e," "]},"room-".concat(e))})),Object(l.jsxs)("div",{className:"lobby-pages",children:[Object(l.jsx)("div",{onClick:function(){u>0&&j((function(e){return e-1}))},className:"lobby-button",children:"Prev"}),Object(l.jsx)("input",{value:u+1,onChange:function(e){e.preventDefault(),j(e.target.value-1)},style:{width:"20px"}})," of ",$,Object(l.jsx)("div",{onClick:function(){u<$-1&&j((function(e){return e+1}))},className:"lobby-button",children:"Next"})]})]})]})}else{var ee=Object(l.jsx)("div",{id:"start-game-btn",onClick:function(){return c.emit("start_game",e.state.current_room)},children:"Start Game"});null!==E&&(ee=Object(l.jsx)("div",{id:"center-card",className:"hand hhand-compact",children:E.map((function(e){return V(e)}))}),Z=Object(l.jsxs)("div",{id:"player-buttons",children:[Object(l.jsx)("div",{className:"hand-button",onClick:function(){return function(){for(var e=[],t=K[0],n=0;n<t.length;n++)J[t[n]]&&e.push(t[n]);q(),0===e.length?c.emit("pass"):c.emit("play_cards",e)}()},children:Object.values(J).every((function(e){return!e}))?"Pass":"Play"}),Object(l.jsx)("div",{className:"hand-button",onClick:function(){return q()},children:"Reset"})]})),X.push(Object(l.jsxs)("div",{children:[" Room: ",e.state.current_room]})),X.push(Object(l.jsx)("div",{onClick:function(){return Y("")},id:"leave-room",children:"Leave"})),W=Object(l.jsx)("div",{children:Object(l.jsxs)("div",{id:"game-body",children:[Object(l.jsxs)("div",{id:"opposite-hand",className:"hand hhand-compact noselect",children:[Object(l.jsxs)("div",{className:"name-plate noselect",children:[g[2]," ",K[2]]}),Array(K[2]).fill(O)]}),Object(l.jsxs)("div",{id:"middle-board",children:[Object(l.jsxs)("div",{id:"left-hand",className:"hand hhand-compact noselect",children:[Object(l.jsxs)("div",{className:"name-plate noselect",children:[g[3]," ",K[3]]}),Array(K[3]).fill(O)]}),Object(l.jsxs)("div",{children:[ee,Object(l.jsx)("img",{src:"AoSArrowB.png",alt:"Ace of Space Turn Indicator",className:"turn-indicator noselect",style:{transform:"rotate(".concat(180-90*C,"deg)"),zIndex:2}}),Object(l.jsx)("img",{src:"AoSArrowR.png",alt:"Center Card Player",className:"turn-indicator noselect",style:{transform:"rotate(".concat(180-90*G,"deg)")}})]}),Object(l.jsxs)("div",{id:"right-hand",className:"hand hhand-compact noselect",children:[Object(l.jsxs)("div",{className:"name-plate noselect",children:[g[1]," ",K[1]]}),Array(K[1]).fill(O)]})]}),Object(l.jsxs)("div",{id:"players-area",children:[Z,Object(l.jsx)("div",{id:"current-hand",className:"hand hhand-compact active-hand",children:K[0].map((function(e){return V(e)}))})]})]})})}return Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{id:"game-header",children:X.map((function(e){return e}))}),W]})}var p=u()("http://localhost:5001",{transports:["websocket","polling"]});var v=function(){var e=Object(r.useReducer)(i.e,{uuid:null,username:null,rooms:[],current_room:"",errors:[]}),t=Object(s.a)(e,2),n=t[0],a=t[1];window.state=n;var c=Object(l.jsx)(l.Fragment,{children:"Loading..."});return c=null===n.uuid||void 0===n.uuid?Object(l.jsx)(j,{dispatch:a}):Object(l.jsx)(m,{state:n,dispatch:a,socket:p}),Object(l.jsxs)("div",{className:"App",children:[c,Object(l.jsx)(b,{state:n,dispatch:a})]})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,303)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(v,{})}),document.getElementById("root")),x()},6:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return u}));var r=n(19),a=n(159),c=n(177),o={LOGIN:"login",JOIN:"join_room",ERROR:"error",GET_ROOMS:"get_rooms"};function s(e,t){switch(console.log(t),t.type){case o.LOGIN:return Object(r.a)(Object(r.a)({},e),{},{uuid:t.payload.uuid,username:t.payload.username,errors:t.payload.errors,current_room:void 0});case o.JOIN:return Object(r.a)(Object(r.a)({},e),{},{current_room:t.payload.room_name,players:t.payload.players});case o.GET_ROOMS:return Object(r.a)(Object(r.a)({},e),{},{rooms:t.payload.rooms});case o.ERROR:return Object(r.a)(Object(r.a)({},e),{},{errors:t.payload.errors});default:return e}}function i(t,n){var r=c.createHash("md5");r.update(e.from(t+n,"utf-8"));var o=r.digest("hex");return a.post("/api/login",{username:t,password:o})}function d(){return a.get("/api/get_rooms")}function u(e){return a.post("/api/create_room",{name:e})}}).call(this,n(4).Buffer)}},[[302,1,2]]]);
//# sourceMappingURL=main.e16fa834.chunk.js.map